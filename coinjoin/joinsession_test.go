package coinjoin

import (
	"fmt"
	"testing"
)

func TestPublishTxHex(t *testing.T) {
	txHex := "0100000001a6dc237a8b6820724fc2ce5f8bc5d933aa862ddd36e79b0498ffb7fb622c11500000000000ffffffff03901364490a00000000001aba76a914ac3d5bf5ef945f026c60902b0354fc26a29ecda288ac00000000000000000000206a1e78781a62938efd822c1825c617d26d03397a3673f88764490a0000000058000000000000000000001abd76a914000000000000000000000000000000000000000088ac00000000e054010001f88764490a000000ad540100010000006a47304402201c3d8f4d92a479e3e5287328803c22ecedddb65c0266e5e36fd0543d13cb458402202a838cafc04c1ec77b9a2e8225f885ef59e0c27db626b4b8dad90bcb545e0d42012103604fc1a6d11ad74dbd2807ffbce97b9da7a04151eef93144574634c4003a3339"
	url := "https://testnet.dcrdata.org/insight/api/tx/send"
	err := publishTxHex(txHex, url)
	if err == nil {
		fmt.Printf("err %v", err)
		t.Fail()
	} else {
		t.Log(err)
	}
}

func TestPublishTxHexMainNet(t *testing.T) {
	txHex := "0100000001a6dc237a8b6820724fc2ce5f8bc5d933aa862ddd36e79b0498ffb7fb622c11500000000000ffffffff03901364490a00000000001aba76a914ac3d5bf5ef945f026c60902b0354fc26a29ecda288ac00000000000000000000206a1e78781a62938efd822c1825c617d26d03397a3673f88764490a0000000058000000000000000000001abd76a914000000000000000000000000000000000000000088ac00000000e054010001f88764490a000000ad540100010000006a47304402201c3d8f4d92a479e3e5287328803c22ecedddb65c0266e5e36fd0543d13cb458402202a838cafc04c1ec77b9a2e8225f885ef59e0c27db626b4b8dad90bcb545e0d42012103604fc1a6d11ad74dbd2807ffbce97b9da7a04151eef93144574634c4003a3339"
	url := "https://explorer.dcrdata.org/insight/api/tx/send"
	err := publishTxHex(txHex, url)
	if err == nil {
		fmt.Printf("err %v", err)
		t.Fail()
	} else {
		t.Log(err)
	}
}
